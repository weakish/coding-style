Coding Style for Python
=======================

Styles stolen from Google
-------------------------

[Google python style](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html)

### Main

Even a file meant to be used as a script should be importable and a mere
import should not have the side effect of executing the script's main
functionality. The main functionality should be in a main() function.

In Python, pychecker, pydoc, and unit tests require modules to be importable.
Your code should always check if __name__ == '__main__' before executing
your main program so that the main program is not executed when the module
is imported.


Personal
--------

### Variable naming

* Use a `var_` prefix for `var_reassignable_variable`.

### Modules

* Use '_' prefixed names instead of ``__all__`` list.  This is simple and
  straight up, and doesn't require the additional effort to maintain an
  extra list.

### Tests

Most of the time I just use doctest,
since it's easy to maintain consistency of code, test and documentation.

### Use `pass` to end a block.

Consider the following Python code:

```python
def f():
    for i in range(10):
        i = i * 2
        print(i)
```

With one wrong keystroke (`TAB`):

```python
def f():
    for i in range(10):
        i = i * 2
    print(i)
```

The above code is also valid.

To avoid this kind of mistakes, we can use `pass` for `end` in Python:

```python
def f():
    for i in range(10):
        i = i * 2
        print(i)
        pass
```

With one wrong keystroke (`TAB`):

```python
def f():
    for i in range(10):
        i = i * 2
    print(i)
        pass
```

Python will refuse to work:

```python
IndentationError: unexpected indent
```

However, python will not always catch unintended indentation even with `pass`.

Suppose we intend to write:

```python
def g():
    for i in range(10):
        i = i * 2
        pass
    print(i)
```

With one wrong keystroke (`TAB`):

```python
def g():
    for i in range(10):
        i = i * 2
        pass
        print(i)
```

Python will *not* refuse to work.

But using `pass` still has two advantages:

- It still provides visual hint.

    If you think `pass` as the last clause of an indented block,
    `print(i)` looks wired to you in the above code.

- A decent editor/IDE will indent correctly if you typed `pass`.

You can omit `pass` when unambiguous:

```python
try:
    print("some code")
except:
    try:
        print("some code")
    finally:
        print("some code")
```

`finally` is not possible to belong to the outer try.

Sometimes it is ambiguous if an `eles` belongs to `if-eles` or `try-except-else`,
but if we write `eles` for every `if` clauses, we can omit more `pass`.

Other
-----

[General code style for programming](/coding-style/general/).